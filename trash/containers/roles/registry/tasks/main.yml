---
#---------------------------------------------------------------
- name: Creating registry
  docker:
    insecure_registry: true
    image: docker.io/registry:2
    restart_policy: always
    state: reloaded
    pull: always
    ports:
      - 0.0.0.0:5000:5000/tcp
    env:
        REGISTRY_STORAGE_FILESYSTEM_ROOTDIRECTORY: /var/lib/registry
    volumes:
        "/nfsshare/registry:/var/lib/registry"

- name: Creating registry-UI
  docker:
    insecure_registry: true
    image: konradkleine/docker-registry-frontend:v2
    restart_policy: always
    state: reloaded
    pull: always
    ports:
      - 0.0.0.0:8888:80/tcp
    env:
        ENV_DOCKER_REGISTRY_HOST: "{{ ansible_host }}"
        ENV_DOCKER_REGISTRY_PORT: 5000
